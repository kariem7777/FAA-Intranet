<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Signature - Financial Audit Authority</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        h1 {
            font-size: 2.5rem !important;

            line-height: 1.2 !important;
        }

        h2 {
            font-size: 2rem !important;

            line-height: 1.3 !important;
        }

        h3 {
            font-size: 1.5rem !important;
            font-weight: 500 !important;
            line-height: 1.4 !important;
        }

        h4 {
            font-size: 1.25rem !important;
            font-weight: 500 !important;
            line-height: 1.4 !important;
        }

        h5 {
            font-size: 1.125rem !important;
            font-weight: 400 !important;
            line-height: 1.5 !important;
        }

        h6 {
            font-size: 1rem !important;
            font-weight: 400 !important;
            line-height: 1.5 !important;
        }

        p {
            font-size: 1rem !important;
            line-height: 1.6 !important;
        }

        a {
            text-decoration: none;
            transition: color 0.2s ease;
        }

        button {
            font-family: inherit !important;
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: #908e81 #f1f1f1;
            letter-spacing: 0.5px;
            font-family: "Dubai", "Tajawal", sans-serif;
        }

        .fs-small {
            font-size: 12px;
        }

        .custom-container {
            max-width: 95vw;
            margin: auto;
        }

        .shadow-lg {
            box-shadow:
                0 10px 15px -3px rgba(0, 0, 0, 0.1),
                0 4px 6px -4px rgba(0, 0, 0, 0.1) !important;
        }

        .border {
            border: 1px solid #E5E5E5 !important;
        }

        :root {
            --faa-red: #ec2227;
            --faa-dark-red: #7b282d;
            --faa-darker-red: #971b1e;
            --faa-maroon: #A94442;
        }

        body {
            background-color: #f8f9fa;
            min-height: 100vh;
            font-family: 'Inter', system-ui, sans-serif;
            overflow-x: hidden;
        }

        body[dir="rtl"] {
            font-family: 'Dubai', Arial, sans-serif;
        }

        .bg-pattern {
            background-image: url('data:image/svg+xml,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="1" fill="%23000000" opacity="0.05"/></svg>');
            background-repeat: repeat;
        }

        .hero-banner {
            background-image: url('./assets/3ca851fd732fadea7ed700a83455499648bbdce7.avif');
            background-size: cover;
            background-position: center;
            border-radius: 16px;
            color: white;
            padding: 40px;
            position: relative;
            overflow: hidden;
            min-height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-banner::before {
            content: '';
            position: absolute;

            top: -50%;
            right: -10%;
            width: 500px;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .hero-content {
            position: relative;
            width: 100%;
            max-width: 800px;
            background-color: rgba(81, 58, 64, 0.72);
            padding: 30px;
            border-radius: 10px;
            z-index: 2;
        }

        body[dir="rtl"] .hero-content {
            text-align: right;
        }

        .stats-cards {
            margin-top: -80px;
            position: relative;
            z-index: 10;
        }

        .stat-card {
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
        }

        .tab-navigation {
            background-color: white;
            border-radius: 12px;
            padding: 4px;
        }

        .tab-btn {
            flex: 1;
            padding: 16px 24px;
            border: none;
            background: transparent;
            color: #6c757d;
            font-weight: 600;
            font-size: 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tab-btn:hover {
            background-color: #f8f9fa;
        }

        .tab-btn.active {
            background-color: var(--faa-maroon);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .tab-btn .badge {
            margin-left: 8px;
        }

        body[dir="rtl"] .tab-btn .badge {
            margin-left: 0;
            margin-right: 8px;
        }

        .tab-btn.active .badge {
            background-color: rgba(255, 255, 255, 0.2) !important;
            color: white !important;
            border: none !important;
        }

        .document-card {
            transition: all 0.3s ease;
        }

        .document-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
        }

        .info-alert {
            background-color: #EFF6FF;
            border: 1px solid #c4d9f5;
            border-radius: 12px;
        }

        .btn-maroon {
            background-color: var(--faa-maroon);
            border-color: var(--faa-maroon);
            color: white;
        }

        .btn-maroon:hover {
            background-color: var(--faa-dark-red);
            border-color: var(--faa-dark-red);
            color: white;
        }

        .modal-content {
            border-radius: 12px;
        }

        .file-upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            border-color: var(--faa-red);
            background-color: #f8f9fa;
        }

        .file-upload-icon {
            width: 48px;
            height: 48px;
            background-color: #f3f4f6;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }

        .colleague-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .colleague-option:hover {
            background-color: #6366f1;
            color: white;
        }

        .priority-high {
            background-color: #dc3545;
            color: white;
        }

        .priority-medium {
            background-color: #6c757d;
            color: white;
        }

        .priority-low {
            background-color: #f8f9fa;
            color: #212529;
            border: 1px solid #dee2e6;
        }

        .badge-signed {
            background-color: #F0FDF4;
            color: #1aa17b;
            border: 1px solid #77f3c2;
        }

        .uae-pass-logo {
            max-width: 120px;
            height: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .dropdown-menu {
            max-height: 300px;
            overflow-y: auto;
        }

        .card-btn {
            background-color: #F7F7F7;
        }

        .card-btn:hover {
            background-color: #F2F2F2;
        }

        @media (max-width: 768px) {
            .hero-banner {
                padding: 24px;
                min-height: auto;
            }

            .hero-content {
                padding: 20px;
            }

            .hero-content h2 {
                font-size: 1.5rem !important;
                line-height: 1.3 !important;
            }

            .hero-content p {
                font-size: 1rem !important;
                line-height: 1.5 !important;
            }

            h1 {
                font-size: 2rem !important;
            }

            h2 {
                font-size: 1.75rem !important;
            }

            h3 {
                font-size: 1.35rem !important;
            }

            .stats-cards {
                margin-top: -30px;
            }
        }
    </style>
</head>

<body class="bg-pattern" dir="ltr">

    <!-- Main Container -->
    <div class="custom-container px-3 px-md-5 w-100">

        <!-- Hero Banner -->
        <div class="pt-4 mb-4 position-relative">
            <div class="hero-banner">
                <div class="hero-content">
                    <h2 class="mb-3" style="font-size: 24px; font-weight: 500; line-height: 28px;">
                        <span class="en-text">Digital Signature</span>
                        <span class="ar-text" style="display: none;">التوقيع الرقمي</span>
                    </h2>
                    <p class="mb-0" style="font-size: 18px; font-weight: 400; line-height: 25.6px;">
                        <span class="en-text">Secure document signing with UAE Pass integration</span>
                        <span class="ar-text" style="display: none;">توقيع آمن للمستندات مع تكامل الهوية الرقمية</span>
                    </p>
                </div>
            </div>

            <!-- Stats Cards - Overlapping Banner -->
            <div class="stats-cards px-3 px-md-5">
                <div class="row g-3 g-md-4">
                    <div class="col-md-4">
                        <div class="card stat-card shadow-lg rounded-4">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="p-3 rounded-3 bg-light text-danger">
                                        <i data-lucide="pen-tool" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div>
                                        <h3 class="display-6 fw-bold mb-1">8</h3>
                                        <p class="text-secondary mb-0">
                                            <span class="en-text">Pending Signatures</span>
                                            <span class="ar-text" style="display: none;">التوقيعات المعلقة</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card stat-card shadow-lg rounded-4">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="p-3 rounded-3 bg-light" style="color: var(--faa-dark-red);">
                                        <i data-lucide="check-circle" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div>
                                        <h3 class="display-6 fw-bold mb-1">34</h3>
                                        <p class="text-secondary mb-0">
                                            <span class="en-text">Completed This Month</span>
                                            <span class="ar-text" style="display: none;">المكتملة هذا الشهر</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card stat-card shadow-lg rounded-4">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="p-3 rounded-3 bg-light" style="color: var(--faa-darker-red);">
                                        <i data-lucide="file-text" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div>
                                        <h3 class="display-6 fw-bold mb-1">5</h3>
                                        <p class="text-secondary mb-0">
                                            <span class="en-text">Total Signed</span>
                                            <span class="ar-text" style="display: none;">إجمالي الموقعة</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="pb-5">
            <!-- Tab Navigation -->
            <div class="card shadow-lg mb-4 rounded-4 border">
                <div class="card-body p-1">
                    <div class="tab-navigation d-flex flex-wrap gap-1">
                        <button class="tab-btn active" data-tab="pending">
                            <div class="d-flex align-items-center justify-content-center gap-2">
                                <i data-lucide="pen-tool" style="width: 20px; height: 20px;"></i>
                                <span class="en-text">Pending Signature</span>
                                <span class="badge bg-white text-dark border">8</span>
                            </div>
                        </button>
                        <button class="tab-btn" data-tab="signed">
                            <div class="d-flex align-items-center justify-content-center gap-2">
                                <i data-lucide="check-circle" style="width: 20px; height: 20px;"></i>
                                <span class="en-text">Signed Documents</span>
                                <span class="badge bg-white text-dark border">5</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Documents Section -->
            <div class="mb-4">
                <div class="d-flex align-items-center justify-content-between flex-wrap gap-4 mb-4">
                    <div>
                        <h2 class="mb-2 fw-bold" id="section-title">
                            <span class="en-text">Documents Awaiting Signature</span>
                        </h2>
                        <p class="text-secondary mb-0" id="section-description">
                            <span class="en-text">Review, download, and sign documents using UAE Pass</span>
                        </p>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                        <span class="badge bg-light text-black fw-normal border fs-6 p-3">
                            <span id="document-count" class="me-1">8</span>
                            <span class="en-text">Documents</span>
                            <span class="ar-text" style="display: none;">وثائق</span>
                        </span>
                        <button class="btn btn-maroon" data-bs-toggle="modal" data-bs-target="#addDocumentModal">
                            <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
                            <span class="en-text ms-2">Add Document</span>
                        </button>
                    </div>
                </div>

                <!-- Info Alert - Only for pending tab -->
                <div class="card info-alert p-3 mb-4" id="info-alert">
                    <div class="d-flex align-items-start gap-3">
                        <i data-lucide="shield" style="width: 20px; height: 20px; color: #2563eb; flex-shrink: 0;"></i>
                        <div class="flex-grow-1">
                            <p class="small text-dark mb-0">
                                <strong>
                                    <span class="en-text">Secure Signing Process:</span>
                                </strong>
                                <span class="en-text">All documents are signed exclusively through UAE Pass. You can
                                    preview and download documents before signing. Clicking "Sign with UAE Pass" will
                                    redirect you to the official UAE Pass portal to authenticate and complete your
                                    signature.</span>
                                <span class="ar-text" style="display: none;">يتم توقيع جميع المستندات حصرياً من خلال
                                    الهوية الرقمية. يمكنك معاينة وتحميل المستندات قبل التوقيع. سيؤدي النقر على "التوقيع
                                    بالهوية الرقمية" إلى إعادة توجيهك إلى بوابة الهوية الرقمية الرسمية للمصادقة وإكمال
                                    التوقيع.</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Pending Documents Tab Content -->
                <div class="tab-content active" id="pending-content">
                    <div class="d-flex flex-column gap-4" id="pending-documents">
                        <!-- Documents will be inserted here by JavaScript -->
                    </div>
                </div>

                <!-- Signed Documents Tab Content -->
                <div class="tab-content" id="signed-content">
                    <div class="d-flex flex-column gap-4" id="signed-documents">
                        <!-- Documents will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Document Modal -->
    <div class="modal fade" id="addDocumentModal" tabindex="-1" aria-labelledby="addDocumentModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addDocumentModalLabel">
                        <span class="en-text">Add Document for Signature</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-secondary mb-4">
                        <span class="en-text">Upload a document and specify whether it's for your signature or to send
                            to a colleague</span>
                    </p>

                    <form id="addDocumentForm">
                        <!-- Document Upload -->
                        <div class="mb-4">
                            <label class="form-label fw-medium">
                                <span class="en-text">Upload Document</span>
                                <span class="ar-text" style="display: none;">تحميل المستند</span>
                            </label>
                            <input type="file" id="documentFile" accept=".pdf,.doc,.docx" class="d-none">
                            <label for="documentFile" class="file-upload-area w-100">
                                <div class="file-upload-icon">
                                    <i data-lucide="file-text" style="width: 32px; height: 32px; color: #9ca3af;"></i>
                                </div>
                                <p class="fw-medium text-dark mb-1" id="file-name">
                                    <span class="en-text">Choose PDF or DOC</span>
                                    <span class="ar-text" style="display: none;">اختر ملف PDF أو DOC</span>
                                </p>
                                <p class="small text-secondary mb-0">
                                    <span class="en-text">or drag and drop</span>
                                    <span class="ar-text" style="display: none;">أو اسحب وأفلت</span>
                                </p>
                            </label>
                        </div>

                        <!-- Document Title -->
                        <div class="mb-4">
                            <label for="documentTitle" class="form-label fw-medium">
                                <span class="en-text">Document Title</span>
                                <span class="ar-text" style="display: none;">عنوان المستند</span>
                            </label>
                            <input type="text" class="form-control" id="documentTitle"
                                placeholder="Enter document title">
                        </div>

                        <!-- Recipient Type -->
                        <div class="mb-4">
                            <label class="form-label fw-medium">
                                <span class="en-text">Recipient</span>
                                <span class="ar-text" style="display: none;">المستلم</span>
                            </label>
                            <div class="d-flex flex-column gap-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="recipientType" id="myself"
                                        value="myself" checked>
                                    <label class="form-check-label d-flex align-items-center gap-2" for="myself">
                                        <i data-lucide="pen-tool" style="width: 16px; height: 16px;"></i>
                                        <span class="en-text">For My Signature</span>
                                        <span class="ar-text" style="display: none;">للتوقيع الشخصي</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="recipientType" id="colleague"
                                        value="colleague">
                                    <label class="form-check-label d-flex align-items-center gap-2" for="colleague">
                                        <i data-lucide="users" style="width: 16px; height: 16px;"></i>
                                        <span class="en-text">Send to Colleague</span>
                                        <span class="ar-text" style="display: none;">إرسال إلى زميل</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Colleague Selection -->
                        <div class="mb-4" id="colleagueSelection" style="display: none;">
                            <label for="colleagueSelect" class="form-label fw-medium">
                                <span class="en-text">Select Colleague</span>
                                <span class="ar-text" style="display: none;">اختر الزميل</span>
                            </label>
                            <input type="text" class="form-control" id="colleagueSearch"
                                placeholder="Search colleagues...">
                            <div class="dropdown-menu w-100" id="colleagueDropdown" style="display: none;">
                                <!-- Colleagues will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Document Type -->
                        <div class="mb-4">
                            <label for="documentType" class="form-label fw-medium">
                                <span class="en-text">Document Type</span>
                                <span class="ar-text" style="display: none;">نوع المستند</span>
                            </label>
                            <select class="form-select" id="documentType">
                                <option value="" class="en-text">Select type</option>
                                <option value="" class="ar-text" style="display: none;">اختر النوع</option>
                                <option value="report">
                                    <span class="en-text">Report</span>
                                    <span class="ar-text" style="display: none;">تقرير</span>
                                </option>
                                <option value="approval">
                                    <span class="en-text">Approval</span>
                                    <span class="ar-text" style="display: none;">موافقة</span>
                                </option>
                                <option value="contract">
                                    <span class="en-text">Contract</span>
                                    <span class="ar-text" style="display: none;">عقد</span>
                                </option>
                                <option value="policy">
                                    <span class="en-text">Policy</span>
                                    <span class="ar-text" style="display: none;">سياسة</span>
                                </option>
                                <option value="plan">
                                    <span class="en-text">Plan</span>
                                    <span class="ar-text" style="display: none;">خطة</span>
                                </option>
                                <option value="other">
                                    <span class="en-text">Other</span>
                                    <span class="ar-text" style="display: none;">أخرى</span>
                                </option>
                            </select>
                        </div>

                        <!-- Priority -->
                        <div class="mb-4">
                            <label for="priority" class="form-label fw-medium">
                                <span class="en-text">Priority</span>
                                <span class="ar-text" style="display: none;">الأولوية</span>
                            </label>
                            <select class="form-select" id="priority">
                                <option value="" class="en-text">Select priority</option>
                                <option value="" class="ar-text" style="display: none;">اختر الأولوية</option>
                                <option value="high">
                                    <span class="en-text">High</span>
                                    <span class="ar-text" style="display: none;">عالي</span>
                                </option>
                                <option value="medium">
                                    <span class="en-text">Medium</span>
                                    <span class="ar-text" style="display: none;">متوسط</span>
                                </option>
                                <option value="low">
                                    <span class="en-text">Low</span>
                                    <span class="ar-text" style="display: none;">منخفض</span>
                                </option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        <span class="en-text">Cancel</span>
                        <span class="ar-text" style="display: none;">إلغاء</span>
                    </button>
                    <button type="button" class="btn btn-maroon" id="submitDocument">
                        <i data-lucide="upload" style="width: 16px; height: 16px;"></i>
                        <span class="en-text ms-2">Submit for Signature</span>
                        <span class="ar-text me-2" style="display: none;">إرسال للتوقيع</span>
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Language management
        let currentLanguage = 'en';

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ar' : 'en';
            document.body.setAttribute('dir', currentLanguage === 'ar' ? 'rtl' : 'ltr');

            // Toggle text visibility
            document.querySelectorAll('.en-text').forEach(el => {
                el.style.display = currentLanguage === 'en' ? '' : 'none';
            });
            document.querySelectorAll('.ar-text').forEach(el => {
                el.style.display = currentLanguage === 'ar' ? '' : 'none';
            });

            // Re-render documents
            renderDocuments();
        }



        // Data
        const documentsToSign = [
            {
                id: 1,
                title: { en: 'Annual Audit Report 2024', ar: 'تقرير التدقيق السنوي 2024' },
                requester: 'Ahmed Al Mansoori',
                department: { en: 'Financial Audit', ar: 'التدقيق المالي' },
                date: '2025-11-26',
                priority: 'High',
                type: { en: 'Report', ar: 'تقرير' },
                size: '2.4 MB',
            },
            {
                id: 2,
                title: { en: 'Budget Approval Request', ar: 'طلب الموافقة على الميزانية' },
                requester: 'Fatima Al Zaabi',
                department: { en: 'Finance', ar: 'المالية' },
                date: '2025-11-25',
                priority: 'Medium',
                type: { en: 'Approval', ar: 'موافقة' },
                size: '1.8 MB',
            },
            {
                id: 3,
                title: { en: 'Contract Agreement - IT Services', ar: 'اتفاقية العقد - خدمات تكنولوجيا المعلومات' },
                requester: 'Omar Rashid',
                department: { en: 'IT', ar: 'تكنولوجيا المعلومات' },
                date: '2025-11-24',
                priority: 'High',
                type: { en: 'Contract', ar: 'عقد' },
                size: '3.1 MB',
            },
            {
                id: 4,
                title: { en: 'Quarterly Financial Statement Q4 2024', ar: 'البيان المالي الفصلي الربع الرابع 2024' },
                requester: 'Sara Al Hashimi',
                department: { en: 'Financial Audit', ar: 'التدقيق المالي' },
                date: '2025-11-23',
                priority: 'High',
                type: { en: 'Report', ar: 'تقرير' },
                size: '4.2 MB',
            },
            {
                id: 5,
                title: { en: 'Policy Review Document', ar: 'وثيقة مراجعة السياسة' },
                requester: 'Mohammed Al Zarooni',
                department: { en: 'Compliance', ar: 'الامتثال' },
                date: '2025-11-22',
                priority: 'Medium',
                type: { en: 'Policy', ar: 'سياسة' },
                size: '1.5 MB',
            },
            {
                id: 6,
                title: { en: 'Internal Audit Plan 2025', ar: 'خطة التدقيق الداخلي 2025' },
                requester: 'Laila Al Amiri',
                department: { en: 'Internal Audit', ar: 'التدقيق الداخلي' },
                date: '2025-11-21',
                priority: 'High',
                type: { en: 'Plan', ar: 'خطة' },
                size: '2.9 MB',
            },

            {
                id: 8,
                title: { en: 'Risk Assessment Report', ar: 'تقرير تقييم المخاطر' },
                requester: 'Noura Al Mazrouei',
                department: { en: 'Risk Management', ar: 'إدارة المخاطر' },
                date: '2025-11-19',
                priority: 'High',
                type: { en: 'Report', ar: 'تقرير' },
                size: '3.6 MB',
            },
        ];

        const signedDocuments = [
            {
                id: 101,
                title: { en: 'Annual Budget Review 2024', ar: 'مراجعة الميزانية السنوية 2024' },
                requester: 'Hassan Al Kaabi',
                department: { en: 'Finance', ar: 'المالية' },
                requestDate: '2025-11-10',
                signedDate: '2025-11-15',
                type: { en: 'Report', ar: 'تقرير' },
                size: '3.2 MB',
            },
            {
                id: 102,
                title: { en: 'HR Policy Update Document', ar: 'وثيقة تحديث سياسة الموارد البشرية' },
                requester: 'Mariam Al Qassimi',
                department: { en: 'Human Resources', ar: 'الموارد البشرية' },
                requestDate: '2025-11-05',
                signedDate: '2025-11-12',
                type: { en: 'Policy', ar: 'سياسة' },
                size: '1.9 MB',
            },
            {
                id: 103,
                title: { en: 'IT Infrastructure Procurement Contract', ar: 'عقد شراء البنية التحتية لتكنولوجيا المعلومات' },
                requester: 'Rashid Al Nuaimi',
                department: { en: 'IT', ar: 'تكنولوجيا المعلومات' },
                requestDate: '2025-10-28',
                signedDate: '2025-11-08',
                type: { en: 'Contract', ar: 'عقد' },
                size: '4.5 MB',
            },
            {
                id: 104,
                title: { en: 'Q3 Financial Audit Report', ar: 'تقرير التدقيق المالي للربع الثالث' },
                requester: 'Aisha Al Shamsi',
                department: { en: 'Financial Audit', ar: 'التدقيق المالي' },
                requestDate: '2025-10-20',
                signedDate: '2025-11-01',
                type: { en: 'Report', ar: 'تقرير' },
                size: '2.8 MB',
            },
            {
                id: 105,
                title: { en: 'Employee Benefits Approval', ar: 'الموافقة على مزايا الموظفين' },
                requester: 'Abdullah Al Dhaheri',
                department: { en: 'HR', ar: 'الموارد البشرية' },
                requestDate: '2025-10-15',
                signedDate: '2025-10-28',
                type: { en: 'Approval', ar: 'موافقة' },
                size: '1.2 MB',
            },
        ];

        const colleagues = [
            { name: 'Ahmed Al Mansoori', department: 'Financial Audit' },
            { name: 'Fatima Al Zaabi', department: 'Finance' },
            { name: 'Omar Rashid', department: 'IT' },
            { name: 'Sara Al Hashimi', department: 'Financial Audit' },
            { name: 'Mohammed Al Zarooni', department: 'Compliance' },
            { name: 'Laila Al Amiri', department: 'Internal Audit' },
            { name: 'Khalid Al Suwaidi', department: 'HR' },
            { name: 'Noura Al Mazrouei', department: 'Risk Management' },
            { name: 'Hassan Al Kaabi', department: 'Finance' },
            { name: 'Mariam Al Qassimi', department: 'Human Resources' },
            { name: 'Rashid Al Nuaimi', department: 'IT' },
            { name: 'Aisha Al Shamsi', department: 'Financial Audit' },
            { name: 'Abdullah Al Dhaheri', department: 'HR' },
        ];



        // Render documents
        function renderDocuments() {
            const pendingContainer = document.getElementById('pending-documents');
            const signedContainer = document.getElementById('signed-documents');


            // Render pending documents
            pendingContainer.innerHTML = documentsToSign.map(doc => `
                <div class="card document-card shadow-lg rounded-4 border">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start justify-content-between gap-4 flex-wrap">
                            <div class="d-flex gap-3 flex-grow-1">
                                <div class="bg-light rounded-3 d-flex align-items-center justify-content-center" style="width: 48px; height: 48px; flex-shrink: 0;">
                                    <i data-lucide="file-text" style="width: 24px; height: 24px; color: var(--faa-red);"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
                                        <h5 class="mb-0">${doc.title[currentLanguage]}</h5>
                                        <span class="badge fw-normal px-2 py-1 priority-${doc.priority.toLowerCase()}" style="background-color: #F1666C; font-size:12px;">${doc.priority.toLowerCase()}</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-3 text-secondary small flex-wrap">
                                        <span>Requested by: ${doc.requester}</span>
                                        <span>•</span>
                                        <span>${doc.department[currentLanguage]}</span>
                                        <span>•</span>
                                        <span class="d-flex align-items-center gap-1">
                                            <i data-lucide="clock" style="width: 12px; height: 12px;"></i>
                                            ${doc.date}
                                        </span>
                                        <span>•</span>
                                        <span>${doc.size}</span>
                                    </div>
                                    <span class="badge bg-white fw-normal text-dark border mt-2">${doc.type[currentLanguage]}</span>
                                </div>
                            </div>
                            <div class="d-flex gap-2 flex-nowrap mt-3 mt-md-0 align-items-center">
                                <button class="card-btn border rounded-3 btn btn-outline-secondary btn-sm d-flex align-items-center justify-content-center text-nowrap" onclick="previewDocument(${doc.id}, 'pending')">
                                    <i data-lucide="file-text" class="text-black fw-bold" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2 fs-small text-dark">Preview</span>
                                </button>
                                <button class="card-btn border rounded-3 btn btn-outline-secondary btn-sm d-flex align-items-center justify-content-center text-nowrap">
                                    <i data-lucide="download" class="text-black fw-bold" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2 fs-small text-dark">Download</span>
                                </button>
                                <button class="btn btn-maroon btn-sm d-flex align-items-center justify-content-center text-nowrap">
                                    <span class=" fs-small text-white">Sign with UAE Pass</span>
                                    <i data-lucide="external-link" style="width: 16px; height: 16px;" class="ms-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Render signed documents
            signedContainer.innerHTML = signedDocuments.map(doc => `
                <div class="card document-card shadow-lg rounded-4 border">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start justify-content-between gap-4 flex-wrap">
                            <div class="d-flex gap-3 flex-grow-1">
                                <div class=" bg-opacity-10 rounded-3 d-flex align-items-center justify-content-center" style="width: 48px; height: 48px; flex-shrink: 0; background-color:#DBFCE7;">
                                    <i data-lucide="check-circle" style="width: 24px; height: 24px; color: #16a34a;"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
                                        <h5 class="mb-0">${doc.title[currentLanguage]}</h5>
                                        <span class="badge badge-signed fw-normal px-2 py-1">Signed</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-3 text-secondary small flex-wrap">
                                        <span>Requested by: ${doc.requester}</span>
                                        <span>•</span>
                                        <span>${doc.department[currentLanguage]}</span>
                                        <span>•</span>
                                        <span class="d-flex align-items-center gap-1">
                                            <i data-lucide="clock" style="width: 12px; height: 12px;"></i>
                                            ${doc.signedDate}
                                        </span>
                                        <span>•</span>
                                        <span>${doc.size}</span>
                                    </div>
                                    <span class="badge bg-white fw-normal text-dark border mt-2">${doc.type[currentLanguage]}</span>
                                </div>
                            </div>
                            <div class="d-flex gap-2 flex-shrink-0 flex-wrap">
                               <button class=" card-btn border rounded-3 btn btn-outline-secondary btn-sm" onclick="previewDocument(${doc.id}, 'pending')">
                                    <i data-lucide="file-text" class="text-black fw-bold" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2 fs-small text-dark">Preview</span>
                                </button>
                                <button class="card-btn border rounded-3 btn btn-outline-secondary btn-sm">
                                    <i data-lucide="download" class="text-black fw-bold" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2 fs-small text-dark">Download</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Reinitialize Lucide icons
            lucide.createIcons();
        }

        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                const tab = this.getAttribute('data-tab');

                // Update active tab button
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tab}-content`).classList.add('active');

                // Update section title and description
                const titles = {
                    pending: {
                        en: 'Documents Awaiting Signature',
                        ar: 'المستندات في انتظار التوقيع'
                    },
                    signed: {
                        en: 'Signed Documents',
                        ar: 'المستندات الموقعة'
                    }
                };

                const descriptions = {
                    pending: {
                        en: 'Review, download, and sign documents using UAE Pass',
                        ar: 'مراجعة وتحميل وتوقيع المستندات باستخدام الهوية الرقمية'
                    },
                    signed: {
                        en: 'View and download previously signed documents',
                        ar: 'عرض وتحميل المستندات الموقعة مسبقاً'
                    }
                };

                document.getElementById('section-title').innerHTML = `
                    <span class="en-text" style="display: ${currentLanguage === 'en' ? '' : 'none'}">${titles[tab].en}</span>
                    <span class="ar-text" style="display: ${currentLanguage === 'ar' ? '' : 'none'}">${titles[tab].ar}</span>
                `;

                document.getElementById('section-description').innerHTML = `
                    <span class="en-text" style="display: ${currentLanguage === 'en' ? '' : 'none'}">${descriptions[tab].en}</span>
                    <span class="ar-text" style="display: ${currentLanguage === 'ar' ? '' : 'none'}">${descriptions[tab].ar}</span>
                `;

                // Update document count
                const count = tab === 'pending' ? documentsToSign.length : signedDocuments.length;
                document.getElementById('document-count').textContent = count;

                // Show/hide info alert
                document.getElementById('info-alert').style.display = tab === 'pending' ? 'block' : 'none';

                // Reinitialize Lucide icons
                lucide.createIcons();
            });
        });

        // File upload
        document.getElementById('documentFile').addEventListener('change', function (e) {
            const fileName = e.target.files[0]?.name || (currentLanguage === 'en' ? 'Choose PDF or DOC' : 'اختر ملف PDF أو DOC');
            document.getElementById('file-name').innerHTML = `
                <span class="en-text" style="display: ${currentLanguage === 'en' ? '' : 'none'}">${fileName}</span>
                <span class="ar-text" style="display: ${currentLanguage === 'ar' ? '' : 'none'}">${fileName}</span>
            `;
        });

        // Recipient type change
        document.querySelectorAll('input[name="recipientType"]').forEach(radio => {
            radio.addEventListener('change', function () {
                const colleagueSelection = document.getElementById('colleagueSelection');
                colleagueSelection.style.display = this.value === 'colleague' ? 'block' : 'none';
            });
        });

        // Colleague search
        const colleagueSearch = document.getElementById('colleagueSearch');
        const colleagueDropdown = document.getElementById('colleagueDropdown');

        colleagueSearch.addEventListener('focus', function () {
            renderColleagues('');
            colleagueDropdown.style.display = 'block';
        });

        colleagueSearch.addEventListener('input', function () {
            renderColleagues(this.value);
        });

        document.addEventListener('click', function (e) {
            if (!colleagueSearch.contains(e.target) && !colleagueDropdown.contains(e.target)) {
                colleagueDropdown.style.display = 'none';
            }
        });

        function renderColleagues(query) {
            const filtered = colleagues.filter(c =>
                c.name.toLowerCase().includes(query.toLowerCase()) ||
                c.department.toLowerCase().includes(query.toLowerCase())
            );

            colleagueDropdown.innerHTML = filtered.map(c => `
                <div class="colleague-option" data-name="${c.name}">
                    ${c.name} - ${c.department}
                </div>
            `).join('');

            // Add click handlers
            document.querySelectorAll('.colleague-option').forEach(option => {
                option.addEventListener('click', function () {
                    colleagueSearch.value = this.getAttribute('data-name');
                    colleagueDropdown.style.display = 'none';
                });
            });
        }

        // Submit document
        document.getElementById('submitDocument').addEventListener('click', function () {
            const modal = bootstrap.Modal.getInstance(document.getElementById('addDocumentModal'));
            modal.hide();

            // Reset form
            document.getElementById('addDocumentForm').reset();
            document.getElementById('file-name').innerHTML = `
                <span class="en-text">Choose PDF or DOC</span>
                <span class="ar-text" style="display: none;">اختر ملف PDF أو DOC</span>
            `;
            document.getElementById('colleagueSelection').style.display = 'none';

            alert(currentLanguage === 'en' ? 'Document submitted successfully!' : 'تم إرسال المستند بنجاح!');
        });

        // Preview document function
        function previewDocument(docId, type) {
            const documents = type === 'pending' ? documentsToSign : signedDocuments;
            const doc = documents.find(d => d.id === docId);

            if (doc) {
                // Prepare document data for preview page
                const previewData = {
                    id: doc.id,
                    title: doc.title[currentLanguage],
                    type: doc.type[currentLanguage],
                    date: doc.date || doc.requestDate,
                    requestDate: doc.requestDate || doc.date,
                    department: doc.department[currentLanguage],
                    requester: doc.requester,
                    size: doc.size,
                    priority: doc.priority
                };

                // Store in localStorage
                localStorage.setItem('previewDocument', JSON.stringify(previewData));

                // Navigate to preview page
                window.location.href = 'DocumentPreviewPage.html?id=' + docId;
            }
        }

        // Initial render
        renderDocuments();

        // Reinitialize icons after modal opens
        document.getElementById('addDocumentModal').addEventListener('shown.bs.modal', function () {
            lucide.createIcons();
        });
    </script>

</body>

</html>