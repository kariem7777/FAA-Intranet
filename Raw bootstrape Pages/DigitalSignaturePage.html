<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Digital Signature - Financial Audit Authority</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        :root {
            --faa-red: #ec2227;
            --faa-dark-red: #7b282d;
            --faa-darker-red: #971b1e;
            --faa-maroon: #A94442;
        }

        body {
            background-color: #f8f9fa;
            min-height: 100vh;
            font-family: 'Inter', system-ui, sans-serif;
        }

        body[dir="rtl"] {
            font-family: 'Dubai', Arial, sans-serif;
        }

        .bg-pattern {
            background-image: url('data:image/svg+xml,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="1" fill="%23000000" opacity="0.05"/></svg>');
            background-repeat: repeat;
        }

        .hero-banner {
            background: linear-gradient(135deg, var(--faa-red) 0%, var(--faa-dark-red) 100%);
            border-radius: 16px;
            color: white;
            padding: 60px 48px;
            position: relative;
            overflow: hidden;
            height: 280px;
        }

        .hero-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 500px;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .hero-content {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: min(957px, calc(100% - 424px));
            background-color: rgba(81, 58, 64, 0.72);
            padding: 20px;
            border-radius: 10px;
        }

        body[dir="rtl"] .hero-content {
            text-align: right;
        }

        .stats-cards {
            margin-top: -80px;
            position: relative;
            z-index: 10;
        }

        .stat-card {
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
        }

        .tab-navigation {
            background-color: white;
            border-radius: 12px;
            padding: 4px;
        }

        .tab-btn {
            flex: 1;
            padding: 16px 24px;
            border: none;
            background: transparent;
            color: #6c757d;
            font-weight: 600;
            font-size: 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tab-btn:hover {
            background-color: #f8f9fa;
        }

        .tab-btn.active {
            background-color: var(--faa-maroon);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .tab-btn .badge {
            margin-left: 8px;
        }

        body[dir="rtl"] .tab-btn .badge {
            margin-left: 0;
            margin-right: 8px;
        }

        .tab-btn.active .badge {
            background-color: rgba(255, 255, 255, 0.2) !important;
            color: white !important;
            border: none !important;
        }

        .document-card {
            transition: all 0.3s ease;
        }

        .document-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
        }

        .info-alert {
            background-color: #dbeafe;
            border: 1px solid #93c5fd;
            border-radius: 12px;
        }

        .btn-maroon {
            background-color: var(--faa-maroon);
            border-color: var(--faa-maroon);
            color: white;
        }

        .btn-maroon:hover {
            background-color: var(--faa-dark-red);
            border-color: var(--faa-dark-red);
            color: white;
        }

        .modal-content {
            border-radius: 12px;
        }

        .file-upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            border-color: var(--faa-red);
            background-color: #f8f9fa;
        }

        .file-upload-icon {
            width: 48px;
            height: 48px;
            background-color: #f3f4f6;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }

        .colleague-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .colleague-option:hover {
            background-color: #6366f1;
            color: white;
        }

        .priority-high {
            background-color: #dc3545;
            color: white;
        }

        .priority-medium {
            background-color: #6c757d;
            color: white;
        }

        .priority-low {
            background-color: #f8f9fa;
            color: #212529;
            border: 1px solid #dee2e6;
        }

        .badge-signed {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        .uae-pass-logo {
            max-width: 120px;
            height: auto;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .dropdown-menu {
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>

<body class="bg-pattern" dir="ltr">

    <!-- Main Container -->
    <div class="container-fluid px-5">

        <!-- Hero Banner -->
        <div class="pt-4 mb-4 position-relative">
            <div class="hero-banner">
                <div class="hero-content">
                    <h2 class="mb-3" style="font-size: 24px; font-weight: 500; line-height: 28px;">
                        <span class="en-text">Digital Signature</span>
                        <span class="ar-text" style="display: none;">التوقيع الرقمي</span>
                    </h2>
                    <p class="mb-0" style="font-size: 18px; font-weight: 400; line-height: 25.6px;">
                        <span class="en-text">Secure document signing with UAE Pass integration</span>
                        <span class="ar-text" style="display: none;">توقيع آمن للمستندات مع تكامل الهوية الرقمية</span>
                    </p>
                </div>
            </div>

            <!-- Stats Cards - Overlapping Banner -->
            <div class="stats-cards px-5">
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card stat-card shadow-lg">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="p-3 rounded-3 bg-light text-danger">
                                        <i data-lucide="pen-tool" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div>
                                        <h3 class="display-6 fw-bold mb-1">8</h3>
                                        <p class="text-secondary mb-0">
                                            <span class="en-text">Pending Signatures</span>
                                            <span class="ar-text" style="display: none;">التوقيعات المعلقة</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card stat-card shadow-lg">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="p-3 rounded-3 bg-light" style="color: var(--faa-dark-red);">
                                        <i data-lucide="check-circle" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div>
                                        <h3 class="display-6 fw-bold mb-1">34</h3>
                                        <p class="text-secondary mb-0">
                                            <span class="en-text">Completed This Month</span>
                                            <span class="ar-text" style="display: none;">المكتملة هذا الشهر</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card stat-card shadow-lg">
                            <div class="card-body p-4">
                                <div class="d-flex align-items-start gap-3">
                                    <div class="p-3 rounded-3 bg-light" style="color: var(--faa-darker-red);">
                                        <i data-lucide="file-text" style="width: 24px; height: 24px;"></i>
                                    </div>
                                    <div>
                                        <h3 class="display-6 fw-bold mb-1">5</h3>
                                        <p class="text-secondary mb-0">
                                            <span class="en-text">Total Signed</span>
                                            <span class="ar-text" style="display: none;">إجمالي الموقعة</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="pt-5 pb-5">

            <!-- Tab Navigation -->
            <div class="card shadow-lg mb-4">
                <div class="card-body p-1">
                    <div class="tab-navigation d-flex gap-1">
                        <button class="tab-btn active" data-tab="pending">
                            <div class="d-flex align-items-center justify-content-center gap-2">
                                <i data-lucide="pen-tool" style="width: 20px; height: 20px;"></i>
                                <span class="en-text">Pending Signature</span>
                                <span class="ar-text" style="display: none;">في انتظار التوقيع</span>
                                <span class="badge bg-white text-dark border">8</span>
                            </div>
                        </button>
                        <button class="tab-btn" data-tab="signed">
                            <div class="d-flex align-items-center justify-content-center gap-2">
                                <i data-lucide="check-circle" style="width: 20px; height: 20px;"></i>
                                <span class="en-text">Signed Documents</span>
                                <span class="ar-text" style="display: none;">المستندات الموقعة</span>
                                <span class="badge bg-secondary text-white">5</span>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Documents Section -->
            <div class="mb-4">
                <div class="d-flex align-items-center justify-content-between flex-wrap gap-4 mb-4">
                    <div>
                        <h2 class="mb-2" id="section-title">
                            <span class="en-text">Documents Awaiting Signature</span>
                            <span class="ar-text" style="display: none;">المستندات في انتظار التوقيع</span>
                        </h2>
                        <p class="text-secondary mb-0" id="section-description">
                            <span class="en-text">Review, download, and sign documents using UAE Pass</span>
                            <span class="ar-text" style="display: none;">مراجعة وتحميل وتوقيع المستندات باستخدام الهوية
                                الرقمية</span>
                        </p>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                        <span class="badge bg-light text-dark border fs-6 px-3 py-2">
                            <span id="document-count">8</span>
                            <span class="en-text">Documents</span>
                            <span class="ar-text" style="display: none;">مستند</span>
                        </span>
                        <button class="btn btn-maroon" data-bs-toggle="modal" data-bs-target="#addDocumentModal">
                            <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
                            <span class="en-text ms-2">Add Document</span>
                            <span class="ar-text me-2" style="display: none;">إضافة مستند</span>
                        </button>
                    </div>
                </div>

                <!-- Info Alert - Only for pending tab -->
                <div class="card info-alert p-3 mb-4" id="info-alert">
                    <div class="d-flex align-items-start gap-3">
                        <i data-lucide="shield" style="width: 20px; height: 20px; color: #2563eb; flex-shrink: 0;"></i>
                        <div class="flex-grow-1">
                            <p class="small text-dark mb-0">
                                <strong>
                                    <span class="en-text">Secure Signing Process:</span>
                                    <span class="ar-text" style="display: none;">عملية توقيع آمنة:</span>
                                </strong>
                                <span class="en-text">All documents are signed exclusively through UAE Pass. You can
                                    preview and download documents before signing. Clicking "Sign with UAE Pass" will
                                    redirect you to the official UAE Pass portal to authenticate and complete your
                                    signature.</span>
                                <span class="ar-text" style="display: none;">يتم توقيع جميع المستندات حصرياً من خلال
                                    الهوية الرقمية. يمكنك معاينة وتحميل المستندات قبل التوقيع. سيؤدي النقر على "التوقيع
                                    بالهوية الرقمية" إلى إعادة توجيهك إلى بوابة الهوية الرقمية الرسمية للمصادقة وإكمال
                                    التوقيع.</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Pending Documents Tab Content -->
                <div class="tab-content active" id="pending-content">
                    <div class="d-flex flex-column gap-4" id="pending-documents">
                        <!-- Documents will be inserted here by JavaScript -->
                    </div>
                </div>

                <!-- Signed Documents Tab Content -->
                <div class="tab-content" id="signed-content">
                    <div class="d-flex flex-column gap-4" id="signed-documents">
                        <!-- Documents will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Document Modal -->
    <div class="modal fade" id="addDocumentModal" tabindex="-1" aria-labelledby="addDocumentModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addDocumentModalLabel">
                        <span class="en-text">Add Document for Signature</span>
                        <span class="ar-text" style="display: none;">إضافة مستند للتوقيع</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-secondary mb-4">
                        <span class="en-text">Upload a document and specify whether it's for your signature or to send
                            to a colleague</span>
                        <span class="ar-text" style="display: none;">قم بتحميل مستند وحدد ما إذا كان للتوقيع الشخصي أو
                            لإرساله إلى زميل</span>
                    </p>

                    <form id="addDocumentForm">
                        <!-- Document Upload -->
                        <div class="mb-4">
                            <label class="form-label fw-medium">
                                <span class="en-text">Upload Document</span>
                                <span class="ar-text" style="display: none;">تحميل المستند</span>
                            </label>
                            <input type="file" id="documentFile" accept=".pdf,.doc,.docx" class="d-none">
                            <label for="documentFile" class="file-upload-area w-100">
                                <div class="file-upload-icon">
                                    <i data-lucide="file-text" style="width: 32px; height: 32px; color: #9ca3af;"></i>
                                </div>
                                <p class="fw-medium text-dark mb-1" id="file-name">
                                    <span class="en-text">Choose PDF or DOC</span>
                                    <span class="ar-text" style="display: none;">اختر ملف PDF أو DOC</span>
                                </p>
                                <p class="small text-secondary mb-0">
                                    <span class="en-text">or drag and drop</span>
                                    <span class="ar-text" style="display: none;">أو اسحب وأفلت</span>
                                </p>
                            </label>
                        </div>

                        <!-- Document Title -->
                        <div class="mb-4">
                            <label for="documentTitle" class="form-label fw-medium">
                                <span class="en-text">Document Title</span>
                                <span class="ar-text" style="display: none;">عنوان المستند</span>
                            </label>
                            <input type="text" class="form-control" id="documentTitle"
                                placeholder="Enter document title">
                        </div>

                        <!-- Recipient Type -->
                        <div class="mb-4">
                            <label class="form-label fw-medium">
                                <span class="en-text">Recipient</span>
                                <span class="ar-text" style="display: none;">المستلم</span>
                            </label>
                            <div class="d-flex flex-column gap-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="recipientType" id="myself"
                                        value="myself" checked>
                                    <label class="form-check-label d-flex align-items-center gap-2" for="myself">
                                        <i data-lucide="pen-tool" style="width: 16px; height: 16px;"></i>
                                        <span class="en-text">For My Signature</span>
                                        <span class="ar-text" style="display: none;">للتوقيع الشخصي</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="recipientType" id="colleague"
                                        value="colleague">
                                    <label class="form-check-label d-flex align-items-center gap-2" for="colleague">
                                        <i data-lucide="users" style="width: 16px; height: 16px;"></i>
                                        <span class="en-text">Send to Colleague</span>
                                        <span class="ar-text" style="display: none;">إرسال إلى زميل</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Colleague Selection -->
                        <div class="mb-4" id="colleagueSelection" style="display: none;">
                            <label for="colleagueSelect" class="form-label fw-medium">
                                <span class="en-text">Select Colleague</span>
                                <span class="ar-text" style="display: none;">اختر الزميل</span>
                            </label>
                            <input type="text" class="form-control" id="colleagueSearch"
                                placeholder="Search colleagues...">
                            <div class="dropdown-menu w-100" id="colleagueDropdown" style="display: none;">
                                <!-- Colleagues will be populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Document Type -->
                        <div class="mb-4">
                            <label for="documentType" class="form-label fw-medium">
                                <span class="en-text">Document Type</span>
                                <span class="ar-text" style="display: none;">نوع المستند</span>
                            </label>
                            <select class="form-select" id="documentType">
                                <option value="" class="en-text">Select type</option>
                                <option value="" class="ar-text" style="display: none;">اختر النوع</option>
                                <option value="report">
                                    <span class="en-text">Report</span>
                                    <span class="ar-text" style="display: none;">تقرير</span>
                                </option>
                                <option value="approval">
                                    <span class="en-text">Approval</span>
                                    <span class="ar-text" style="display: none;">موافقة</span>
                                </option>
                                <option value="contract">
                                    <span class="en-text">Contract</span>
                                    <span class="ar-text" style="display: none;">عقد</span>
                                </option>
                                <option value="policy">
                                    <span class="en-text">Policy</span>
                                    <span class="ar-text" style="display: none;">سياسة</span>
                                </option>
                                <option value="plan">
                                    <span class="en-text">Plan</span>
                                    <span class="ar-text" style="display: none;">خطة</span>
                                </option>
                                <option value="other">
                                    <span class="en-text">Other</span>
                                    <span class="ar-text" style="display: none;">أخرى</span>
                                </option>
                            </select>
                        </div>

                        <!-- Priority -->
                        <div class="mb-4">
                            <label for="priority" class="form-label fw-medium">
                                <span class="en-text">Priority</span>
                                <span class="ar-text" style="display: none;">الأولوية</span>
                            </label>
                            <select class="form-select" id="priority">
                                <option value="" class="en-text">Select priority</option>
                                <option value="" class="ar-text" style="display: none;">اختر الأولوية</option>
                                <option value="high">
                                    <span class="en-text">High</span>
                                    <span class="ar-text" style="display: none;">عالي</span>
                                </option>
                                <option value="medium">
                                    <span class="en-text">Medium</span>
                                    <span class="ar-text" style="display: none;">متوسط</span>
                                </option>
                                <option value="low">
                                    <span class="en-text">Low</span>
                                    <span class="ar-text" style="display: none;">منخفض</span>
                                </option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        <span class="en-text">Cancel</span>
                        <span class="ar-text" style="display: none;">إلغاء</span>
                    </button>
                    <button type="button" class="btn btn-maroon" id="submitDocument">
                        <i data-lucide="upload" style="width: 16px; height: 16px;"></i>
                        <span class="en-text ms-2">Submit for Signature</span>
                        <span class="ar-text me-2" style="display: none;">إرسال للتوقيع</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Language Toggle (Hidden button for demo) -->
    <button id="languageToggle" class="btn btn-sm btn-outline-secondary position-fixed"
        style="bottom: 20px; right: 20px; z-index: 1000;">
        Toggle Language
    </button>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Language management
        let currentLanguage = 'en';

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ar' : 'en';
            document.body.setAttribute('dir', currentLanguage === 'ar' ? 'rtl' : 'ltr');

            // Toggle text visibility
            document.querySelectorAll('.en-text').forEach(el => {
                el.style.display = currentLanguage === 'en' ? '' : 'none';
            });
            document.querySelectorAll('.ar-text').forEach(el => {
                el.style.display = currentLanguage === 'ar' ? '' : 'none';
            });

            // Re-render documents
            renderDocuments();
        }

        document.getElementById('languageToggle').addEventListener('click', toggleLanguage);

        // Data
        const documentsToSign = [
            {
                id: 1,
                title: { en: 'Annual Audit Report 2024', ar: 'تقرير التدقيق السنوي 2024' },
                requester: 'Ahmed Al Mansoori',
                department: { en: 'Financial Audit', ar: 'التدقيق المالي' },
                date: '2025-11-26',
                priority: 'High',
                type: { en: 'Report', ar: 'تقرير' },
                size: '2.4 MB',
            },
            {
                id: 2,
                title: { en: 'Budget Approval Request', ar: 'طلب الموافقة على الميزانية' },
                requester: 'Fatima Al Zaabi',
                department: { en: 'Finance', ar: 'المالية' },
                date: '2025-11-25',
                priority: 'Medium',
                type: { en: 'Approval', ar: 'موافقة' },
                size: '1.8 MB',
            },
            {
                id: 3,
                title: { en: 'Contract Agreement - IT Services', ar: 'اتفاقية العقد - خدمات تكنولوجيا المعلومات' },
                requester: 'Omar Rashid',
                department: { en: 'IT', ar: 'تكنولوجيا المعلومات' },
                date: '2025-11-24',
                priority: 'High',
                type: { en: 'Contract', ar: 'عقد' },
                size: '3.1 MB',
            },
            {
                id: 4,
                title: { en: 'Quarterly Financial Statement Q4 2024', ar: 'البيان المالي الفصلي الربع الرابع 2024' },
                requester: 'Sara Al Hashimi',
                department: { en: 'Financial Audit', ar: 'التدقيق المالي' },
                date: '2025-11-23',
                priority: 'High',
                type: { en: 'Report', ar: 'تقرير' },
                size: '4.2 MB',
            },
            {
                id: 5,
                title: { en: 'Policy Review Document', ar: 'وثيقة مراجعة السياسة' },
                requester: 'Mohammed Al Zarooni',
                department: { en: 'Compliance', ar: 'الامتثال' },
                date: '2025-11-22',
                priority: 'Medium',
                type: { en: 'Policy', ar: 'سياسة' },
                size: '1.5 MB',
            },
            {
                id: 6,
                title: { en: 'Internal Audit Plan 2025', ar: 'خطة التدقيق الداخلي 2025' },
                requester: 'Laila Al Amiri',
                department: { en: 'Internal Audit', ar: 'التدقيق الداخلي' },
                date: '2025-11-21',
                priority: 'High',
                type: { en: 'Plan', ar: 'خطة' },
                size: '2.9 MB',
            },
            {
                id: 7,
                title: { en: 'Staff Training Approval', ar: 'الموافقة على تدريب الموظفين' },
                requester: 'Khalid Al Suwaidi',
                department: { en: 'HR', ar: 'الموارد البشرية' },
                date: '2025-11-20',
                priority: 'Low',
                type: { en: 'Approval', ar: 'موافقة' },
                size: '0.8 MB',
            },
            {
                id: 8,
                title: { en: 'Risk Assessment Report', ar: 'تقرير تقييم المخاطر' },
                requester: 'Noura Al Mazrouei',
                department: { en: 'Risk Management', ar: 'إدارة المخاطر' },
                date: '2025-11-19',
                priority: 'High',
                type: { en: 'Report', ar: 'تقرير' },
                size: '3.6 MB',
            },
        ];

        const signedDocuments = [
            {
                id: 101,
                title: { en: 'Annual Budget Review 2024', ar: 'مراجعة الميزانية السنوية 2024' },
                requester: 'Hassan Al Kaabi',
                department: { en: 'Finance', ar: 'المالية' },
                requestDate: '2025-11-10',
                signedDate: '2025-11-15',
                type: { en: 'Report', ar: 'تقرير' },
                size: '3.2 MB',
            },
            {
                id: 102,
                title: { en: 'HR Policy Update Document', ar: 'وثيقة تحديث سياسة الموارد البشرية' },
                requester: 'Mariam Al Qassimi',
                department: { en: 'Human Resources', ar: 'الموارد البشرية' },
                requestDate: '2025-11-05',
                signedDate: '2025-11-12',
                type: { en: 'Policy', ar: 'سياسة' },
                size: '1.9 MB',
            },
            {
                id: 103,
                title: { en: 'IT Infrastructure Procurement Contract', ar: 'عقد شراء البنية التحتية لتكنولوجيا المعلومات' },
                requester: 'Rashid Al Nuaimi',
                department: { en: 'IT', ar: 'تكنولوجيا المعلومات' },
                requestDate: '2025-10-28',
                signedDate: '2025-11-08',
                type: { en: 'Contract', ar: 'عقد' },
                size: '4.5 MB',
            },
            {
                id: 104,
                title: { en: 'Q3 Financial Audit Report', ar: 'تقرير التدقيق المالي للربع الثالث' },
                requester: 'Aisha Al Shamsi',
                department: { en: 'Financial Audit', ar: 'التدقيق المالي' },
                requestDate: '2025-10-20',
                signedDate: '2025-11-01',
                type: { en: 'Report', ar: 'تقرير' },
                size: '2.8 MB',
            },
            {
                id: 105,
                title: { en: 'Employee Benefits Approval', ar: 'الموافقة على مزايا الموظفين' },
                requester: 'Abdullah Al Dhaheri',
                department: { en: 'HR', ar: 'الموارد البشرية' },
                requestDate: '2025-10-15',
                signedDate: '2025-10-28',
                type: { en: 'Approval', ar: 'موافقة' },
                size: '1.2 MB',
            },
        ];

        const colleagues = [
            { name: 'Ahmed Al Mansoori', department: 'Financial Audit' },
            { name: 'Fatima Al Zaabi', department: 'Finance' },
            { name: 'Omar Rashid', department: 'IT' },
            { name: 'Sara Al Hashimi', department: 'Financial Audit' },
            { name: 'Mohammed Al Zarooni', department: 'Compliance' },
            { name: 'Laila Al Amiri', department: 'Internal Audit' },
            { name: 'Khalid Al Suwaidi', department: 'HR' },
            { name: 'Noura Al Mazrouei', department: 'Risk Management' },
            { name: 'Hassan Al Kaabi', department: 'Finance' },
            { name: 'Mariam Al Qassimi', department: 'Human Resources' },
            { name: 'Rashid Al Nuaimi', department: 'IT' },
            { name: 'Aisha Al Shamsi', department: 'Financial Audit' },
            { name: 'Abdullah Al Dhaheri', department: 'HR' },
        ];

        const translations = {
            en: {
                requestedBy: 'Requested by:',
                requestDate: 'Request Date:',
                signedDate: 'Signed Date:',
                preview: 'Preview',
                download: 'Download',
                signWithUAE: 'Sign with UAE Pass',
                viewDocument: 'View Document',
                signed: 'Signed',
                priority: {
                    high: 'High',
                    medium: 'Medium',
                    low: 'Low'
                }
            },
            ar: {
                requestedBy: 'طلب من:',
                requestDate: 'تاريخ الطلب:',
                signedDate: 'تاريخ التوقيع:',
                preview: 'معاينة',
                download: 'تحميل',
                signWithUAE: 'التوقيع بالهوية الرقمية',
                viewDocument: 'عرض المستند',
                signed: 'موقع',
                priority: {
                    high: 'عالي',
                    medium: 'متوسط',
                    low: 'منخفض'
                }
            }
        };

        // Render documents
        function renderDocuments() {
            const pendingContainer = document.getElementById('pending-documents');
            const signedContainer = document.getElementById('signed-documents');
            const t = translations[currentLanguage];

            // Render pending documents
            pendingContainer.innerHTML = documentsToSign.map(doc => `
                <div class="card document-card shadow-lg">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start justify-content-between gap-4 flex-wrap">
                            <div class="d-flex gap-3 flex-grow-1">
                                <div class="bg-light rounded-3 d-flex align-items-center justify-content-center" style="width: 48px; height: 48px; flex-shrink: 0;">
                                    <i data-lucide="file-text" style="width: 24px; height: 24px; color: var(--faa-red);"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
                                        <h5 class="mb-0">${doc.title[currentLanguage]}</h5>
                                        <span class="badge priority-${doc.priority.toLowerCase()}">${t.priority[doc.priority.toLowerCase()]}</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-3 text-secondary small flex-wrap">
                                        <span>${t.requestedBy} ${doc.requester}</span>
                                        <span>•</span>
                                        <span>${doc.department[currentLanguage]}</span>
                                        <span>•</span>
                                        <span class="d-flex align-items-center gap-1">
                                            <i data-lucide="clock" style="width: 12px; height: 12px;"></i>
                                            ${doc.date}
                                        </span>
                                        <span>•</span>
                                        <span>${doc.size}</span>
                                    </div>
                                    <span class="badge bg-light text-dark border mt-2">${doc.type[currentLanguage]}</span>
                                </div>
                            </div>
                            <div class="d-flex gap-2 flex-shrink-0 flex-wrap">
                                <button class="btn btn-outline-secondary btn-sm" onclick="previewDocument(${doc.id}, 'pending')">
                                    <i data-lucide="file-text" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2">${t.preview}</span>
                                </button>
                                <button class="btn btn-outline-secondary btn-sm">
                                    <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2">${t.download}</span>
                                </button>
                                <button class="btn btn-maroon">
                                    <span>${t.signWithUAE}</span>
                                    <i data-lucide="external-link" style="width: 16px; height: 16px;" class="ms-2"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Render signed documents
            signedContainer.innerHTML = signedDocuments.map(doc => `
                <div class="card document-card shadow-lg">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start justify-content-between gap-4 flex-wrap">
                            <div class="d-flex gap-3 flex-grow-1">
                                <div class="bg-success bg-opacity-10 rounded-3 d-flex align-items-center justify-content-center" style="width: 48px; height: 48px; flex-shrink: 0;">
                                    <i data-lucide="check-circle" style="width: 24px; height: 24px; color: #16a34a;"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <div class="d-flex align-items-center gap-2 mb-2 flex-wrap">
                                        <h5 class="mb-0">${doc.title[currentLanguage]}</h5>
                                        <span class="badge badge-signed">${t.signed}</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-3 text-secondary small flex-wrap">
                                        <span>${t.requestedBy} ${doc.requester}</span>
                                        <span>•</span>
                                        <span>${doc.department[currentLanguage]}</span>
                                        <span>•</span>
                                        <span class="d-flex align-items-center gap-1">
                                            <i data-lucide="clock" style="width: 12px; height: 12px;"></i>
                                            ${t.signedDate} ${doc.signedDate}
                                        </span>
                                        <span>•</span>
                                        <span>${doc.size}</span>
                                    </div>
                                    <span class="badge bg-light text-dark border mt-2">${doc.type[currentLanguage]}</span>
                                </div>
                            </div>
                            <div class="d-flex gap-2 flex-shrink-0 flex-wrap">
                                <button class="btn btn-outline-secondary btn-sm" onclick="previewDocument(${doc.id}, 'signed')">
                                    <i data-lucide="file-text" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2">${t.preview}</span>
                                </button>
                                <button class="btn btn-outline-secondary btn-sm">
                                    <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                                    <span class="ms-2">${t.download}</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            // Reinitialize Lucide icons
            lucide.createIcons();
        }

        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                const tab = this.getAttribute('data-tab');

                // Update active tab button
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tab}-content`).classList.add('active');

                // Update section title and description
                const titles = {
                    pending: {
                        en: 'Documents Awaiting Signature',
                        ar: 'المستندات في انتظار التوقيع'
                    },
                    signed: {
                        en: 'Signed Documents',
                        ar: 'المستندات الموقعة'
                    }
                };

                const descriptions = {
                    pending: {
                        en: 'Review, download, and sign documents using UAE Pass',
                        ar: 'مراجعة وتحميل وتوقيع المستندات باستخدام الهوية الرقمية'
                    },
                    signed: {
                        en: 'View and download previously signed documents',
                        ar: 'عرض وتحميل المستندات الموقعة مسبقاً'
                    }
                };

                document.getElementById('section-title').innerHTML = `
                    <span class="en-text" style="display: ${currentLanguage === 'en' ? '' : 'none'}">${titles[tab].en}</span>
                    <span class="ar-text" style="display: ${currentLanguage === 'ar' ? '' : 'none'}">${titles[tab].ar}</span>
                `;

                document.getElementById('section-description').innerHTML = `
                    <span class="en-text" style="display: ${currentLanguage === 'en' ? '' : 'none'}">${descriptions[tab].en}</span>
                    <span class="ar-text" style="display: ${currentLanguage === 'ar' ? '' : 'none'}">${descriptions[tab].ar}</span>
                `;

                // Update document count
                const count = tab === 'pending' ? documentsToSign.length : signedDocuments.length;
                document.getElementById('document-count').textContent = count;

                // Show/hide info alert
                document.getElementById('info-alert').style.display = tab === 'pending' ? 'block' : 'none';

                // Reinitialize Lucide icons
                lucide.createIcons();
            });
        });

        // File upload
        document.getElementById('documentFile').addEventListener('change', function (e) {
            const fileName = e.target.files[0]?.name || (currentLanguage === 'en' ? 'Choose PDF or DOC' : 'اختر ملف PDF أو DOC');
            document.getElementById('file-name').innerHTML = `
                <span class="en-text" style="display: ${currentLanguage === 'en' ? '' : 'none'}">${fileName}</span>
                <span class="ar-text" style="display: ${currentLanguage === 'ar' ? '' : 'none'}">${fileName}</span>
            `;
        });

        // Recipient type change
        document.querySelectorAll('input[name="recipientType"]').forEach(radio => {
            radio.addEventListener('change', function () {
                const colleagueSelection = document.getElementById('colleagueSelection');
                colleagueSelection.style.display = this.value === 'colleague' ? 'block' : 'none';
            });
        });

        // Colleague search
        const colleagueSearch = document.getElementById('colleagueSearch');
        const colleagueDropdown = document.getElementById('colleagueDropdown');

        colleagueSearch.addEventListener('focus', function () {
            renderColleagues('');
            colleagueDropdown.style.display = 'block';
        });

        colleagueSearch.addEventListener('input', function () {
            renderColleagues(this.value);
        });

        document.addEventListener('click', function (e) {
            if (!colleagueSearch.contains(e.target) && !colleagueDropdown.contains(e.target)) {
                colleagueDropdown.style.display = 'none';
            }
        });

        function renderColleagues(query) {
            const filtered = colleagues.filter(c =>
                c.name.toLowerCase().includes(query.toLowerCase()) ||
                c.department.toLowerCase().includes(query.toLowerCase())
            );

            colleagueDropdown.innerHTML = filtered.map(c => `
                <div class="colleague-option" data-name="${c.name}">
                    ${c.name} - ${c.department}
                </div>
            `).join('');

            // Add click handlers
            document.querySelectorAll('.colleague-option').forEach(option => {
                option.addEventListener('click', function () {
                    colleagueSearch.value = this.getAttribute('data-name');
                    colleagueDropdown.style.display = 'none';
                });
            });
        }

        // Submit document
        document.getElementById('submitDocument').addEventListener('click', function () {
            const modal = bootstrap.Modal.getInstance(document.getElementById('addDocumentModal'));
            modal.hide();

            // Reset form
            document.getElementById('addDocumentForm').reset();
            document.getElementById('file-name').innerHTML = `
                <span class="en-text">Choose PDF or DOC</span>
                <span class="ar-text" style="display: none;">اختر ملف PDF أو DOC</span>
            `;
            document.getElementById('colleagueSelection').style.display = 'none';

            alert(currentLanguage === 'en' ? 'Document submitted successfully!' : 'تم إرسال المستند بنجاح!');
        });

        // Preview document function
        function previewDocument(docId, type) {
            const documents = type === 'pending' ? documentsToSign : signedDocuments;
            const doc = documents.find(d => d.id === docId);

            if (doc) {
                // Prepare document data for preview page
                const previewData = {
                    id: doc.id,
                    title: doc.title[currentLanguage],
                    type: doc.type[currentLanguage],
                    date: doc.date || doc.requestDate,
                    requestDate: doc.requestDate || doc.date,
                    department: doc.department[currentLanguage],
                    requester: doc.requester,
                    size: doc.size,
                    priority: doc.priority
                };

                // Store in localStorage
                localStorage.setItem('previewDocument', JSON.stringify(previewData));

                // Navigate to preview page
                window.location.href = 'DocumentPreviewPage.html?id=' + docId;
            }
        }

        // Initial render
        renderDocuments();

        // Reinitialize icons after modal opens
        document.getElementById('addDocumentModal').addEventListener('shown.bs.modal', function () {
            lucide.createIcons();
        });
    </script>

</body>

</html>